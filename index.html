async function askBot() {
    const inputField = document.getElementById("userInput");
    const log = document.getElementById("chat-window");
    const input = inputField.value.trim();
    if (!input) return;

    log.innerHTML += `<div class="msg user">${input}</div>`;
    inputField.value = "";
    
    const loadingId = "load-" + Date.now();
    log.innerHTML += `<div class="msg bot" id="${loadingId}">[üì° Accessing Satellite...]</div>`;

    try {
        // We use a different URL format that is harder for Wi-Fi filters to block
        const url = `https://en.wikipedia.org{encodeURIComponent(input)}?redirect=true&origin=*`;
        
        const response = await fetch(url);
        
        if (!response.ok) throw new Error("Satellite offline");

        const data = await response.json();
        document.getElementById(loadingId).remove();

        if (data.extract) {
            log.innerHTML += `<div class="msg bot"><b>RESULT:</b> ${data.extract}</div>`;
        } else {
            log.innerHTML += `<div class="msg bot">No data found for "${input}".</div>`;
        }
    } catch (error) {
        // This is the error catch! 
        // Without this, the "Thinking..." message would stay forever and the bot would freeze.
        document.getElementById(loadingId).innerText = "‚ùå CONNECTION BLOCKED: Your Wi-Fi might be blocking Wikipedia!";
    }
    log.scrollTop = log.scrollHeight;
}
